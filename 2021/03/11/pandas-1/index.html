<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>pandas-1 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="pandas基础(jupyter)一.创建、读取和存储1.创建在 Pandas 中我们想要构造下面这一张表应该如何操作呢？     数学 英语 语文 总分    小明 88 77 86 251   小刘 86 67 69 222   小王 96 85 66 247   小白 77 85 69 231    第一步一定是先导入我们的库——import pandas as pd  构造 DataF">
<meta property="og:type" content="article">
<meta property="og:title" content="pandas-1">
<meta property="og:url" content="http://example.com/2021/03/11/pandas-1/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="pandas基础(jupyter)一.创建、读取和存储1.创建在 Pandas 中我们想要构造下面这一张表应该如何操作呢？     数学 英语 语文 总分    小明 88 77 86 251   小刘 86 67 69 222   小王 96 85 66 247   小白 77 85 69 231    第一步一定是先导入我们的库——import pandas as pd  构造 DataF">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/03/11/ivm76lzodeuTVaZ.png">
<meta property="og:image" content="https://i.loli.net/2021/03/11/SElF2tompz4hydx.png">
<meta property="og:image" content="https://i.loli.net/2021/03/11/GuvdINsr7lPU8mo.png">
<meta property="og:image" content="https://i.loli.net/2021/03/11/DymocQawZX8dEiU.png">
<meta property="og:image" content="https://i.loli.net/2021/03/11/9T1magUSAwEsz3d.png">
<meta property="og:image" content="https://i.loli.net/2021/03/11/2aT1sBdzlyZwCrJ.png">
<meta property="og:image" content="https://i.loli.net/2021/03/12/LSoFI89U7Jj3Dey.png">
<meta property="og:image" content="https://i.loli.net/2021/03/12/OvLr2xsXnFuElYm.png">
<meta property="og:image" content="https://i.loli.net/2021/03/12/bYj6tS4UK1wy2vu.png">
<meta property="og:image" content="https://i.loli.net/2021/03/12/aTepoSchMZNrAzm.png">
<meta property="og:image" content="https://i.loli.net/2021/03/12/6bkUzHda7XjJOnq.png">
<meta property="og:image" content="https://i.loli.net/2021/03/12/e1ukTP6FH9yMnz4.png">
<meta property="og:image" content="https://i.loli.net/2021/03/12/xj9rDHeOzXBYt6p.png">
<meta property="og:image" content="https://i.loli.net/2021/03/12/myLjcKuPA9zNC6r.png">
<meta property="og:image" content="https://i.loli.net/2021/03/13/I7isfcJpde4nGuy.png">
<meta property="og:image" content="https://i.loli.net/2021/03/13/ct7b1nsLyNvRXh8.png">
<meta property="og:image" content="https://i.loli.net/2021/03/13/CpXvON84dtqM9LV.png">
<meta property="og:image" content="https://i.loli.net/2021/03/13/caZHVBKoUjfTFWt.png">
<meta property="og:image" content="https://i.loli.net/2021/03/13/wXkSlMKLA5Z4zjO.png">
<meta property="og:image" content="https://i.loli.net/2021/03/13/Gjo5f6hyIEzZlKT.png">
<meta property="og:image" content="https://i.loli.net/2021/03/13/GLIw7luzAHb5XRy.png">
<meta property="og:image" content="https://i.loli.net/2021/03/13/r3aMBL5vVTGzERH.png">
<meta property="article:published_time" content="2021-03-11T12:47:19.000Z">
<meta property="article:modified_time" content="2021-03-11T12:47:19.000Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="pandas">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/03/11/ivm76lzodeuTVaZ.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-pandas-1" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/11/pandas-1/" class="article-date">
  <time class="dt-published" datetime="2021-03-11T12:47:19.000Z" itemprop="datePublished">2021-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      pandas-1
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=530 height=86 src="//music.163.com/outchain/player?type=2&id=1303019637&auto=0&height=66"></iframe>

<h1 id="pandas基础-jupyter"><a href="#pandas基础-jupyter" class="headerlink" title="pandas基础(jupyter)"></a>pandas基础(jupyter)</h1><h2 id="一-创建、读取和存储"><a href="#一-创建、读取和存储" class="headerlink" title="一.创建、读取和存储"></a>一.<strong>创建、读取和存储</strong></h2><p>1.创建在 Pandas 中我们想要构造下面这一张表应该如何操作呢？</p>
<table>
<thead>
<tr>
<th></th>
<th>数学</th>
<th>英语</th>
<th>语文</th>
<th>总分</th>
</tr>
</thead>
<tbody><tr>
<td>小明</td>
<td>88</td>
<td>77</td>
<td>86</td>
<td>251</td>
</tr>
<tr>
<td>小刘</td>
<td>86</td>
<td>67</td>
<td>69</td>
<td>222</td>
</tr>
<tr>
<td>小王</td>
<td>96</td>
<td>85</td>
<td>66</td>
<td>247</td>
</tr>
<tr>
<td>小白</td>
<td>77</td>
<td>85</td>
<td>69</td>
<td>231</td>
</tr>
</tbody></table>
<ol>
<li><p>第一步一定是先导入我们的库——import pandas as pd</p>
</li>
<li><p>构造 DataFrame， 最常用的方式是字典+列表，语句很简单，先是字典外括，然后</p>
<p> 依次打出每一列标题及其对应的列值（此处一定要用列表），这里列的顺序并不重要。</p>
<p> 如下所示：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df1=pd.DataFrame(&#123;<span class="string">&#x27;数学&#x27;</span>:[<span class="number">88</span>,<span class="number">86</span>,<span class="number">96</span>,<span class="number">77</span>],<span class="string">&#x27;英语&#x27;</span>:[<span class="number">77</span>,<span class="number">67</span>,<span class="number">85</span>,<span class="number">85</span>],<span class="string">&#x27;语文&#x27;</span>:[<span class="number">86</span>,<span class="number">69</span>,<span class="number">66</span>,<span class="number">69</span>],<span class="string">&#x27;总分&#x27;</span>:[<span class="number">251</span>,<span class="number">222</span>,<span class="number">247</span>,<span class="number">231</span>],index=[<span class="string">&#x27;小明&#x27;</span>，<span class="string">&#x27;小刘&#x27;</span>,<span class="string">&#x27;小王&#x27;</span>,<span class="string">&#x27;小白&#x27;</span>]&#125;)</span><br><span class="line">df1</span><br></pre></td></tr></table></figure>

<p> 实例如下：</p>
 <img src="https://i.loli.net/2021/03/11/ivm76lzodeuTVaZ.png" alt="image-20210311211748937" style="zoom: 67%;" /></li>
</ol>
<h2 id="二-读取"><a href="#二-读取" class="headerlink" title="二.读取"></a>二.读取</h2><p>​    更多时候，我们是把相关文件数据直接读进 PANDAS 中进行操作，这里介绍两种非常接近的读取方式，一种是 CSV 格式的文件，一种是 EXCEL 格式（.xlsx 和 xls 后缀）的文件。</p>
<ol>
<li><h3 id="读取-csv-文件："><a href="#读取-csv-文件：" class="headerlink" title="读取 csv 文件："></a>读取 csv 文件：</h3></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df2=pd.read_csv(<span class="string">&#x27;流量练习数据.csv&#x27;</span>,engine=<span class="string">&#x27;python&#x27;</span>)</span><br><span class="line">df2.head()</span><br></pre></td></tr></table></figure>

<p>engine 是使用的分析引擎，读取 csv 文件一般指定 python 避免中文和编码造成的报错。</p>
<p>实例如下：</p>
<img src="https://i.loli.net/2021/03/11/SElF2tompz4hydx.png" alt="image-20210311212801228" style="zoom:67%;" />

<ol start="2">
<li><h3 id="读取-Excel-文件"><a href="#读取-Excel-文件" class="headerlink" title="读取 Excel 文件"></a>读取 Excel 文件</h3></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">df3&#x3D;pd.read_excel(&#39;流量练习数据.xls&#39;)</span><br><span class="line">df3.head()</span><br></pre></td></tr></table></figure>

<p>read_csv 和 read_excel 还有一些参数，比如 header、sep、names 等，大家可以做额外了解。实践中数据源的格式一般都是比较规整的，更多情况是直接读取。</p>
<p>实例：</p>
<img src="https://i.loli.net/2021/03/11/GuvdINsr7lPU8mo.png" alt="image-20210311213353131" style="zoom:67%;" />

<h2 id="三-存储"><a href="#三-存储" class="headerlink" title="三.存储"></a>三.存储</h2><ol>
<li><h3 id="存储excel"><a href="#存储excel" class="headerlink" title="存储excel"></a>存储excel</h3></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df2.to_excel(<span class="string">&#x27;df2.xlsx&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><h3 id="存储csv"><a href="#存储csv" class="headerlink" title="存储csv"></a>存储csv</h3></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df3.to_csv(<span class="string">&#x27;df3.csv&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2021/03/11/DymocQawZX8dEiU.png" alt="image-20210311214308041"></p>
<h2 id="四-快速认识数据"><a href="#四-快速认识数据" class="headerlink" title="四.快速认识数据"></a>四.快速认识数据</h2><h3 id="1-查看数据，掐头看尾"><a href="#1-查看数据，掐头看尾" class="headerlink" title="1.查看数据，掐头看尾"></a>1.查看数据，掐头看尾</h3><p>​        很多时候我们想要对数据内容做一个总览，用 df.head()函数直接可以查看默认的前 5 行，与之对应，df.tail()就可以查看数据尾部的 5 行数据，这两个参数内可以传入一个数值来控制查看的行数，例如 df.head(10)表示查看前 10 行数据.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#查看前五行</span><br><span class="line">df.head()</span><br><span class="line">#查看后五行</span><br><span class="line">df.tail()</span><br><span class="line">#查看前十行</span><br><span class="line">df.head(10)</span><br></pre></td></tr></table></figure>

<h3 id="2-格式查看"><a href="#2-格式查看" class="headerlink" title="2.格式查看"></a>2.格式查看</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#帮助我们一步摸清各列数据的类型，以及缺失情况</span></span><br><span class="line">df.info()</span><br></pre></td></tr></table></figure>

<img src="https://i.loli.net/2021/03/11/9T1magUSAwEsz3d.png" alt="image-20210311215136221" style="zoom:67%;" />

<p>​        从上面直接可以知道数据集的行列数，数据集的大小，每一列的数据类型，以及有多少条非空数据。</p>
<h3 id="3-统计信息概览"><a href="#3-统计信息概览" class="headerlink" title="3.统计信息概览"></a>3.统计信息概览</h3><p>​    快速计算数值型数据的关键统计指标，像平均数、中位数、标准差等等.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df2.describe()</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<img src="https://i.loli.net/2021/03/11/2aT1sBdzlyZwCrJ.png" alt="image-20210311215511631" style="zoom:67%;" />

<p>​        注意到本来 5 列数据，为什么返回结果只有两列？那是因为这个操作只针对数值型的列。其中 count 是统计每一列的有多少个非空数值，mean、std、min、max对应的分别是该列的均值、标准差、平均值和最大值，25%、50%、75%对应的则是分位数。</p>
<h3 id="4-列的基本处理方式"><a href="#4-列的基本处理方式" class="headerlink" title="4.列的基本处理方式"></a>4.列的基本处理方式</h3><p>​        采用 SQL 四大法宝的逻辑来简单梳理针对列的基本处理方式——增、删、选、改。</p>
<p>​        <code>tip：使用 Pandas 时，尽量避免用行或者 EXCEL 操作单元格的思维来处理数据，要逐渐养成一种列向思维</code></p>
<h4 id="1-增"><a href="#1-增" class="headerlink" title="1.增"></a>1.增</h4><p>​        增加一列，用 df[‘新列名’] = 新列值的形式，在原数据基础上赋值即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df2[&#39;new_line&#39;]&#x3D;range(1,len(df2)+1)</span><br><span class="line">df2.head()</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<img src="https://i.loli.net/2021/03/12/LSoFI89U7Jj3Dey.png" alt="image-20210312111703138" style="zoom:67%;" />



<h4 id="2-删："><a href="#2-删：" class="headerlink" title="2.删："></a>2.删：</h4><p>我们用 drop 函数制定删除对应的列，axis = 1 表示针对列的操作，inplace 为 True，则直接在源数据上进行修改，否则源数据会保持原样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df2.drop(&#39;new_line&#39;,axis&#x3D;1,inplace &#x3D; True)</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2021/03/12/OvLr2xsXnFuElYm.png" alt="image-20210312111942924"></p>
<h4 id="3-选："><a href="#3-选：" class="headerlink" title="3.选："></a>3.选：</h4><p>想要选取某一列怎么办？df[‘列名’]即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df2[&#39;访客数&#39;]</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2021/03/12/bYj6tS4UK1wy2vu.png" alt="image-20210312112125161"></p>
<p>选取多列呢？需要用列表来传递：df[[‘第一列’,’第二列’,’第三列’..]]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df2[[&#39;访客数&#39;,&#39;来源明细&#39;]]</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<img src="https://i.loli.net/2021/03/12/aTepoSchMZNrAzm.png" alt="image-20210312112445371"  />

<p><code>tip：加上head()仅查看前五行</code></p>
<h4 id="4-改："><a href="#4-改：" class="headerlink" title="4.改："></a>4.改：</h4><p>​        好事多磨，复杂的针对特定条件和行列的筛选、修改，放在后面结合案例细讲，这里只讲一下最简单的更改：df[‘旧列名’] = 某个值或者某列值，就完成了对原列数值的修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df2[&#39;访客数&#39;]&#x3D;range(1,len(df2)+1)</span><br><span class="line">df2.head(6)</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<p><img src="https://i.loli.net/2021/03/12/6bkUzHda7XjJOnq.png" alt="image-20210312113515695"></p>
<h2 id="五-常用数据类型及操作"><a href="#五-常用数据类型及操作" class="headerlink" title="五.常用数据类型及操作"></a>五.常用数据类型及操作</h2><h3 id="1-字符串"><a href="#1-字符串" class="headerlink" title="1.字符串"></a>1.字符串</h3><p>​        字符串类型是最常用的格式之一了，Pandas 中字符串的操作和原生字符串操作几乎一毛一样，唯一不同的是需要在操作前加上”.str”。</p>
<p><code>tip:我们最初用 df2.info()查看数据类型时，非数值型的列都返回的是object 格式，和 str 类型深层机制上的区别就不展开了，在常规实际应用中，我们可以先理解为 object 对应的就是 str 格式，int64 对应的就是 int 格式，float64对应的就是 float 格式即可。</code></p>
<p>​        在案例数据中，我们发现来源明细那一列，可能是系统导出的历史遗留问题，每一个字符串前面都有一个“-”符号，又丑又无用，所以把他给拿掉:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df2[&#39;来源明细&#39;].str.replace(&#39;-&#39;,&#39;&#39;)</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<p><img src="https://i.loli.net/2021/03/12/e1ukTP6FH9yMnz4.png" alt="image-20210312114107080"></p>
<p>以上操作并不会改变原数据，再次输入df2.head()：</p>
<p><img src="https://i.loli.net/2021/03/12/xj9rDHeOzXBYt6p.png" alt="image-20210312114229951"></p>
<p>所以，可以替换原数据对应的那一列：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df2[&#39;来源明细&#39;]&#x3D;df2[&#39;来源明细&#39;].str.replace(&#39;-&#39;,&#39;&#39;)</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<p><img src="https://i.loli.net/2021/03/12/myLjcKuPA9zNC6r.png" alt="image-20210312114546648"></p>
<h3 id="2-数值型"><a href="#2-数值型" class="headerlink" title="2.数值型"></a>2.数值型</h3><p>​        数值型数据，常见的操作是计算，分为与单个值的运算，长度相等列的运算。</p>
<p>​        以案例数据为例，源数据访客数我们是知道的，现在想把所有渠道的访客都加上10000，怎么操作呢？</p>
<p>​        只需要选中访客数所在列，然后加上 10000 即可，pandas 自动将 10000 和每一行数值相加，针对单个值的其他运算（减乘除）也是如此。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df2[&#39;访客数&#39;]</span><br><span class="line">df2[&#39;访客数&#39;]+10000</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2021/03/13/I7isfcJpde4nGuy.png" alt="image-20210313152107623" style="zoom:50%;" /><img src="https://i.loli.net/2021/03/13/ct7b1nsLyNvRXh8.png" alt="image-20210313152127229" style="zoom:50%;" /></p>
<p><code>tip：以上操作并不会改变原数据</code></p>
<p>​            列之间的运算语句也非常简洁。源数据是包含了访客数、转化率和客单价，而实际工作中我们对每个渠道贡献的销售额更感兴趣。（销售额 = 访客数 X 转化率 X 客单价）对应操作语句：df[‘销售额’] = df[‘访客数’] * df[‘转化率’] * df[‘客单价’]但为什么疯狂报错？</p>
<p>​        导致报错的原因，是数值型数据和非数值型数据相互计算导致的。PANDAS 把带“%”符号的转化率识别成字符串类型，我们需要先拿掉百分号，再将这一列转化为浮点型数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df2[&#39;支付转化率&#39;]&#x3D;df2[&#39;支付转化率&#39;].str.replace(&#39;%&#39;,&#39;&#39;).astype(float)</span><br><span class="line">df2.head()</span><br></pre></td></tr></table></figure>

<img src="https://i.loli.net/2021/03/13/CpXvON84dtqM9LV.png" alt="image-20210313152805433" style="zoom: 67%;" />

<p>​        要注意的是，这样操作，把 9.98%变成了 9.98，所以我们还需要让支付转化率除以 100，来还原百分数的真实数值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df2[&#39;支付转化率&#39;]&#x3D;df2[&#39;支付转化率&#39;]&#x2F;100</span><br><span class="line">df2.head()</span><br></pre></td></tr></table></figure>

<img src="https://i.loli.net/2021/03/13/caZHVBKoUjfTFWt.png" alt="image-20210313152955280" style="zoom:67%;" />

<p>然后，再用三个指标相乘计算销售额：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df2[&#39;销售额&#39;]&#x3D;df2[&#39;支付转化率&#39;]*df2[&#39;访客数&#39;]*df2[&#39;客单价&#39;]</span><br><span class="line">df2.head()</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2021/03/13/wXkSlMKLA5Z4zjO.png" alt="image-20210313153246797"></p>
<h3 id="3-时间类型"><a href="#3-时间类型" class="headerlink" title="3.时间类型"></a>3.时间类型</h3><p>​        PANDAS 中时间序列相关的水非常深，这里只对日常中最基础的时间格式进行讲解，对时间序列感兴趣的同学可以自行查阅相关资料，深入了解。</p>
<p>​        以案例数据为例，我们这些渠道数据，是在 2019 年 8 月 2 日提取的，后面可能涉及到其他日期的渠道数据，所以需要加一列时间予以区分，在 EXCEL 中常用的时间格式是’2019-8-3’或者’2019/8/3’，我们用 PANDAS 来实现一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df2[&#39;date&#39;]&#x3D;&#39;2021-3-13&#39;</span><br><span class="line">df2.head()</span><br></pre></td></tr></table></figure>

<img src="https://i.loli.net/2021/03/13/Gjo5f6hyIEzZlKT.png" alt="image-20210313153918252" style="zoom:67%;" />

<p>在实际业务中，一些时候 PANDAS 会把文件中日期格式的字段读取为字符串格</p>
<p>式，这里我们先把字符串’2019-8-3’赋值给新增的日期列，然后用 to_datetime()</p>
<p>函数将字符串类型转换成时间格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#上半图，dtype:object</span><br><span class="line">df2[&#39;date&#39;]</span><br><span class="line">#下半图dtype:datetime64</span><br><span class="line">df2[&#39;date&#39;]&#x3D;pd.to_datetime(df2[&#39;date&#39;])</span><br><span class="line">df2[&#39;date&#39;].head()</span><br></pre></td></tr></table></figure>

<img src="https://i.loli.net/2021/03/13/GLIw7luzAHb5XRy.png" alt="image-20210313154408801" style="zoom:67%;" />

<p>​        转换成时间格式（这里是 datetime64）之后，我们可以用处理时间的思路高效处理这些数据，比如，我现在想知道提取数据这一天离年末还有多少天（’2021-12-31’），直接做减法（该函数接受时间格式的字符串序列，也接受单个字符串）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.to_datetime(&#39;2021-12-31&#39;)-pd.to_datetime(df2[&#39;date&#39;])</span><br></pre></td></tr></table></figure>

<img src="https://i.loli.net/2021/03/13/r3aMBL5vVTGzERH.png" alt="image-20210313154831812" style="zoom:67%;" />
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/11/pandas-1/" data-id="ckm7vvgut000a58v7club6cpl" data-title="pandas-1" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pandas/" rel="tag">pandas</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/03/13/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hello World
        
      </div>
    </a>
  
  
    <a href="/2021/03/11/markdown-2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">markdown-2</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/En-note/">En-note</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/markdown/">markdown</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%88%9D%E9%81%87/">初遇</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/en/" rel="tag">en</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/essay/" rel="tag">essay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hello-world/" rel="tag">hello world</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pandas/" rel="tag">pandas</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/en/" style="font-size: 10px;">en</a> <a href="/tags/essay/" style="font-size: 20px;">essay</a> <a href="/tags/hello-world/" style="font-size: 10px;">hello world</a> <a href="/tags/pandas/" style="font-size: 10px;">pandas</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/13/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/03/11/pandas-1/">pandas-1</a>
          </li>
        
          <li>
            <a href="/2021/03/11/markdown-2/">markdown-2</a>
          </li>
        
          <li>
            <a href="/2021/03/11/English/">English</a>
          </li>
        
          <li>
            <a href="/2021/03/11/markdown-1/">markdown-1.md</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>